<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Manage Bookings</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;700&display=swap" rel="stylesheet">
  <style>
    body {
      font-family: 'Poppins', sans-serif;
      background-color: #f9fafb; /* Light gray background */
    }
  </style>
</head>
<body>
  <!-- Navbar -->
  <nav class="bg-gray-800 text-white p-4">
    <div class="flex justify-between items-center max-w-6xl mx-auto">
      <div class="text-xl font-bold">SkyConnect</div>
      <div class="space-x-4">
        <a href="dashboard.html" class="hover:underline">Dashboard</a>
        <a href="flights.html" class="hover:underline">Flights</a>
        <a href="manage_bookings.html" class="hover:underline">Manage Bookings</a>
      </div>
    </div>
  </nav>

  <!-- Manage Bookings Section -->
  <div class="max-w-6xl mx-auto my-8 bg-white p-6 rounded shadow-lg">
    <h2 class="text-2xl font-bold mb-4">Manage Your Bookings</h2>
    <table class="w-full border-collapse border border-gray-300">
      <thead>
        <tr class="bg-gray-200">
          <th class="border p-2">Booking ID</th>
          <th class="border p-2">Flight</th>
          <th class="border p-2">From</th>
          <th class="border p-2">To</th>
          <th class="border p-2">Date</th>
          <th class="border p-2">Seat</th>
          <th class="border p-2">Actions</th>
        </tr>
      </thead>
      <tbody id="bookingsTable">
        <!-- Bookings will be dynamically populated here -->
      </tbody>
    </table>
  </div>

  <!-- Footer -->
  <footer class="bg-gray-800 text-white p-4 text-center mt-8">
    <p>&copy; 2025 SkyConnect. All rights reserved.</p>
  </footer>

  <script>
    // Sample booking data
    const bookings = [
      { bookingID: "B001", flight: "Flight A123", from: "City A", to: "City B", date: "2025-03-24", seat: "12A" },
      { bookingID: "B002", flight: "Flight B456", from: "City C", to: "City D", date: "2025-03-25", seat: "10B" },
      { bookingID: "B003", flight: "Flight C789", from: "City A", to: "City B", date: "2025-03-26", seat: "14C" },
    ];

    const bookingsTable = document.getElementById("bookingsTable");

    // Populate booking table dynamically
    bookings.forEach(booking => {
      const row = document.createElement("tr");
      row.innerHTML = `
        <td class="border p-2">${booking.bookingID}</td>
        <td class="border p-2">${booking.flight}</td>
        <td class="border p-2">${booking.from}</td>
        <td class="border p-2">${booking.to}</td>
        <td class="border p-2">${booking.date}</td>
        <td class="border p-2">${booking.seat}</td>
        <td class="border p-2 space-x-2">
          <button class="cancelBtn bg-red-600 text-white px-4 py-2 rounded" data-booking-id="${booking.bookingID}">Cancel</button>
          <button class="changeSeatBtn bg-blue-600 text-white px-4 py-2 rounded" data-booking-id="${booking.bookingID}">Change Seat</button>
        </td>
      `;
      bookingsTable.appendChild(row);
    });

    // Handle Cancel Booking
    document.querySelectorAll(".cancelBtn").forEach(button => {
      button.addEventListener("click", (e) => {
        const bookingID = e.target.dataset.bookingId;
        if (confirm(`Are you sure you want to cancel booking ${bookingID}?`)) {
          // Remove booking from the table
          const row = e.target.parentElement.parentElement;
          row.remove();

          // Optionally, remove booking from the bookings array
          alert(`Booking ${bookingID} has been canceled.`);
        }
      });
    });

    // Handle Change Seat
    document.querySelectorAll(".changeSeatBtn").forEach(button => {
      button.addEventListener("click", (e) => {
        const bookingID = e.target.dataset.bookingId;
        const newSeat = prompt("Enter your new seat number:");
        if (newSeat) {
          // Update seat in the table
          const row = e.target.parentElement.parentElement;
          const seatCell = row.querySelectorAll("td")[5];
          seatCell.textContent = newSeat;

          alert(`Seat for booking ${bookingID} has been changed to ${newSeat}.`);
        }
      });
    });
  </script>
</body>
</html>
